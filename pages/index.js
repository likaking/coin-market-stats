import React, {Suspense} from 'react';
import Head from 'next/head'
import dynamic from 'next/dynamic'
import Link from "next/link"
import Image from 'next/image'
import styles from '../styles/Home.module.css'
import {FaBars} from 'react-icons/fa'
import {FaFacebook, FaTwitter, FaTiktok, FaYoutube, FaCopyright, FaArrowUp, FaArrowRight, FaUserFriends,FaShoppingBasket,FaHamburger} from 'react-icons/fa'
import { useState,useEffect,useRef } from 'react';
import axios from 'axios'
import Header from './header/header.js';
import { useReducer } from "react";
import SearchCrypto from '../src/search.js'
import {DisplayCoin} from '../src/displayCoin.js'
import {Currencies} from '../src/currencies.js'
import HeaderActivities from '../src/headerActivity.js'
import Tools from '../src/tools.js'

const  Footer = React.lazy(()=> import('./footer/footer.js'))



export default function Home(setCmvErrorsx={setCmvErrorsx}) {
  const [currency,setCurrency] = useState('USD')
  const [currencySymbol,setCurrencySymbol] = useState('$')
  const [currencyPlural,setCurrencyPlural] = useState('US dollars')
  const [currencySingular,setCurrencySingular] = useState('US dollar')
  const [finalComp, setFinalComp] = useState([])   
  const [coinArr, setCoinArr] = useState([])
  const [info, setInfo] = useState(true)
  const [quickData, setQuickData] = useState(false);
  const [runOrStop,setRunOrStop] = useState(true);
  const [searchGems,setSearchGems] = useState('')
  const [openModal,setOpenModal] = useState(false)
  const [modalSearch,setModalSearch] = useState('')
  const [startModal,setStartModal] = useState(false)
  const [index,setIndex] = useState()
  const [priceAlertzPing,setPriceAlertzPing] = useState([])
  const [openPriceALertsModal,setOpenPriceALertsModal] = useState(false)

  
  const  [activeCoins,setActiveCoins]  = useState(
   [
  {
    "id": "bitcoin",
    "symbol": "btc",
    "name": "Bitcoin",
    "image": "https://assets.coingecko.com/coins/images/1/large/bitcoin.png?1547033579",
    "current_price": 17115.45,
    "market_cap": 329397403093,
    "market_cap_rank": 1,
    "fully_diluted_valuation": 359819152957,
    "total_volume": 17991158957,
    "high_24h": 17190.71,
    "low_24h": 16941.21,
    "price_change_24h": 158.64,
    "price_change_percentage_24h": 0.93556,
    "market_cap_change_24h": 4184827197,
    "market_cap_change_percentage_24h": 1.2868,
    "circulating_supply": 19224506,
    "total_supply": 21000000,
    "max_supply": 21000000,
    "ath": 69045,
    "ath_change_percentage": -75.18521,
    "ath_date": "2021-11-10T14:24:11.849Z",
    "atl": 67.81,
    "atl_change_percentage": 25167.02066,
    "atl_date": "2013-07-06T00:00:00.000Z",
    "roi": null,
    "last_updated": "2022-12-05T00:15:05.551Z",
    "sparkline_in_7d": {
      "price": [
        16459.149543755877,
        16470.200838940345,
        16157.676919005626,
        16149.654036814965,
        16193.360463920795,
        16201.20938739389,
        16193.029396048185,
        16216.123830986704,
        16222.797820194317,
        16240.470728652723,
        16238.131775271055,
        16213.216082499514,
        16204.598855148211,
        16228.621829128942,
        16208.290621248974,
        16263.68549372937,
        16143.627481211812,
        16436.54148294756,
        16221.455407121211,
        16166.666663576201,
        16230.500778046728,
        16254.26508280277,
        16203.22587365276,
        16228.741088491362,
        16222.49921096898,
        16184.670162734785,
        16255.616819002147,
        16278.742101260812,
        16291.206341865358,
        16445.679164443314,
        16491.01675090165,
        16467.129117778146,
        16463.496465686378,
        16507.286135774357,
        16527.845830387814,
        16522.05538174054,
        16505.27949439145,
        16489.30488040014,
        16422.389540110576,
        16402.651186308904,
        16419.20171257642,
        16415.55372644792,
        16392.94512082493,
        16419.427877774833,
        16431.36484680531,
        16494.017975607854,
        16472.29724732473,
        16476.589438481253,
        16446.879607031446,
        16838.602095757018,
        16883.252050801508,
        17013.2431892632,
        16891.001457055103,
        16880.41424017057,
        16882.306084687276,
        16874.781048128945,
        16904.870075956347,
        16928.089305503836,
        16914.989741893005,
        16920.377955003307,
        16922.231310367755,
        16899.129339918978,
        16849.775192720597,
        16857.50386978481,
        16903.464656261414,
        16912.543045061284,
        16898.994491266818,
        16761.193318731523,
        16977.059438909466,
        17097.39439247944,
        17109.630011969733,
        17102.704483833968,
        17227.39403750192,
        17186.502572066118,
        17213.907149102863,
        17156.88312359578,
        17127.05281003731,
        17157.07255129906,
        17190.898911625518,
        17168.855387466414,
        17131.81752971552,
        17121.849285929926,
        17112.57985963168,
        17140.580932301884,
        17114.54698812787,
        17158.510120628453,
        17155.690047537562,
        17134.453575336338,
        17171.55740138808,
        17019.67706210402,
        16996.690533475845,
        17043.06431292914,
        16935.463430135744,
        17020.131204518195,
        16954.05700045591,
        16995.53315716639,
        17034.498305438967,
        16972.73406077455,
        17081.150167124026,
        16948.36671386534,
        16942.054880659063,
        16902.817480380327,
        16942.49231707887,
        16946.570093400518,
        16947.7892238246,
        16970.40580620059,
        16981.45239770451,
        16993.80115471984,
        17022.025662866505,
        17017.112935036814,
        17033.747473205276,
        16897.500491380804,
        16950.59420135294,
        16994.937937916297,
        16996.800931238537,
        17002.948632295716,
        16975.170745089505,
        16985.62404418803,
        17019.17057523081,
        17033.57112936429,
        17072.74210514936,
        17146.572922646876,
        17058.69860095004,
        17095.759040549874,
        17038.357138627503,
        17029.67328522309,
        17039.273450054534,
        17028.204598357406,
        16980.95078308812,
        16975.966277828276,
        16945.17570213079,
        16975.82529136985,
        16969.500587760685,
        16958.000567893032,
        16976.055904526827,
        16954.45059417445,
        16988.04760690205,
        16977.260935771137,
        16960.51931608474,
        16986.85561769628,
        16986.626054983277,
        16975.783530886532,
        16947.974134602155,
        17009.901940548327,
        16889.141270527234,
        16923.38287008033,
        16964.2705313402,
        16983.609233119583,
        16990.554104903982,
        17023.60922016028,
        17007.289553678147,
        17022.758055999875,
        17008.136638743,
        17008.52586263672,
        17021.14533305147,
        17014.17595115737,
        17019.596431812082,
        16961.13024931239,
        16966.97512562053,
        16951.65896780764,
        17018.60483856467,
        17033.664119069625,
        17026.696220790647,
        17051.529535893213,
        17067.936248873008,
        17108.53008106652,
        17113.724296211523,
        17121.49073038419,
        17115.71613894933
      ]
    },
    "price_change_percentage_1h_in_currency": -0.011710502930527417,
    "price_change_percentage_24h_in_currency": 0.9355559209215837,
    "price_change_percentage_7d_in_currency": 3.98743694505668
  },
  {
    "id": "eos",
    "symbol": "eos",
    "name": "EOS",
    "image": "https://assets.coingecko.com/coins/images/738/large/eos-eos-logo.png?1547034481",
    "current_price": 0.931532,
    "market_cap": 1012650251,
    "market_cap_rank": 44,
    "fully_diluted_valuation": null,
    "total_volume": 73423935,
    "high_24h": 0.93529,
    "low_24h": 0.921919,
    "price_change_24h": 0.00586964,
    "price_change_percentage_24h": 0.6341,
    "market_cap_change_24h": 10464993,
    "market_cap_change_percentage_24h": 1.04422,
    "circulating_supply": 1085987813.136,
    "total_supply": null,
    "max_supply": null,
    "ath": 22.71,
    "ath_change_percentage": -95.89385,
    "ath_date": "2018-04-29T07:50:33.540Z",
    "atl": 0.5024,
    "atl_change_percentage": 85.62092,
    "atl_date": "2017-10-23T00:00:00.000Z",
    "roi": {
      "times": -0.05905863809429252,
      "currency": "usd",
      "percentage": -5.905863809429253
    },
    "last_updated": "2022-12-05T00:14:55.739Z",
    "sparkline_in_7d": {
      "price": [
        0.9338775367746339,
        0.8951602447869366,
        0.8930302380969429,
        0.9009723461712067,
        0.900284014025372,
        0.8960825945091554,
        0.9001381293350286,
        0.9009550664957914,
        0.9038080157031184,
        0.8993253038989594,
        0.8972379340320922,
        0.8967226882623505,
        0.8981516623141923,
        0.8986410877802526,
        0.9022471909353001,
        0.894935807356565,
        0.9046750664549073,
        0.9039766040024413,
        0.9012349435891872,
        0.9018224341192437,
        0.9059532662326161,
        0.9042779529069596,
        0.9057930944018137,
        0.9054266142523001,
        0.9031991663849648,
        0.9095017875347116,
        0.9120834032776417,
        0.9122174202941236,
        0.9172069515116226,
        0.9210012534633224,
        0.918190863542523,
        0.9183198942969786,
        0.9211361078089811,
        0.9212073936056684,
        0.9206586287907159,
        0.9202490551869322,
        0.9191786608652519,
        0.9116430237788733,
        0.9141131710006132,
        0.9150063660882081,
        0.9165792167600469,
        0.9152048861148319,
        0.9190663164922424,
        0.9186409336429644,
        0.9215644531096373,
        0.92139930549394,
        0.921534400341374,
        0.9192627969548524,
        0.9438782781283735,
        0.9404224675783696,
        0.9426220783440011,
        0.9356685121134165,
        0.9403859499198619,
        0.938200084328024,
        0.9374772362930227,
        0.9397602888695811,
        0.94012925525201,
        0.9392759686847997,
        0.9416762896900094,
        0.9442554493779926,
        0.9417040831319514,
        0.9417867540713432,
        0.946713428411058,
        0.943241898118176,
        0.943503342766357,
        0.9298780388942357,
        0.9445651042318204,
        0.9471041021700279,
        0.9480542069663588,
        0.9481743026142017,
        0.9515357669930969,
        0.9524432921336217,
        0.9504677761134177,
        0.9463450943086157,
        0.9447620823955795,
        0.9474371129017364,
        0.9477877935309095,
        0.94436825887039,
        0.9429874671967905,
        0.9427705548105302,
        0.9411152889206668,
        0.9420531074251666,
        0.938840015952465,
        0.9416085026402808,
        0.9436024912328101,
        0.9398143723387059,
        0.941172180049478,
        0.9327314231569093,
        0.9342503967516564,
        0.9365265536178308,
        0.9340451809224283,
        0.9376790933861726,
        0.9338256051557563,
        0.9365332613950761,
        0.9363629703737946,
        0.9330360089766021,
        0.9383283948914781,
        0.9289857524874032,
        0.9297628248429404,
        0.9260891049046258,
        0.9305994629404266,
        0.93102321739698,
        0.9313712512406017,
        0.9332029366626072,
        0.9324574513414666,
        0.9352493303844385,
        0.9402721266216175,
        0.9388848719318873,
        0.9395675562379674,
        0.9334009440707838,
        0.9382521846196866,
        0.940740077928952,
        0.9406433268394419,
        0.9415426544615006,
        0.942255686585527,
        0.9445427732391916,
        0.9456443499297478,
        0.9457624215636667,
        0.9466640590277691,
        0.9457771383108935,
        0.9441940190065404,
        0.9460154803301231,
        0.9416917776324912,
        0.9390026412799198,
        0.939130130645307,
        0.9401940944246291,
        0.9351931054394128,
        0.9354035513887164,
        0.9333667982890776,
        0.9350402203919577,
        0.9405976493389359,
        0.9384629530839687,
        0.9383459262010444,
        0.9397418690604102,
        0.9410287196764708,
        0.9395599187578185,
        0.9358781677521847,
        0.9357856967323097,
        0.932341534850086,
        0.931313687311442,
        0.9274018347183197,
        0.9299451795402803,
        0.9195800331333629,
        0.9233170253787707,
        0.9276583472994513,
        0.9297048903051426,
        0.9332850549721884,
        0.9318385043211754,
        0.9303960945191546,
        0.9300860703702893,
        0.9307204588534781,
        0.9292277387956694,
        0.9266620532269102,
        0.9257168015587716,
        0.9249163128429555,
        0.922408914719583,
        0.9245628583946286,
        0.9247638047434572,
        0.9251483623091262,
        0.9249940692792872,
        0.9247674563927043,
        0.9265058576388852,
        0.9272235826185198,
        0.92877170166033,
        0.9302850860702535,
        0.9314697689834534,
        0.9292026142579188,
        0.9324692586792954
      ]
    },
    "price_change_percentage_1h_in_currency": 0.21611535497345655,
    "price_change_percentage_24h_in_currency": 0.6341016734898787,
    "price_change_percentage_7d_in_currency": 0.05664897337177161
  },
  {
    "id": "tezos",
    "symbol": "xtz",
    "name": "Tezos",
    "image": "https://assets.coingecko.com/coins/images/976/large/Tezos-logo.png?1547034862",
    "current_price": 1.01,
    "market_cap": 921078053,
    "market_cap_rank": 46,
    "fully_diluted_valuation": null,
    "total_volume": 13923996,
    "high_24h": 1.012,
    "low_24h": 0.995806,
    "price_change_24h": 0.00980448,
    "price_change_percentage_24h": 0.98031,
    "market_cap_change_24h": 12021191,
    "market_cap_change_percentage_24h": 1.32238,
    "circulating_supply": 910596383.409155,
    "total_supply": null,
    "max_supply": null,
    "ath": 9.12,
    "ath_change_percentage": -88.9037,
    "ath_date": "2021-10-04T00:41:18.025Z",
    "atl": 0.350476,
    "atl_change_percentage": 188.62049,
    "atl_date": "2018-12-07T00:00:00.000Z",
    "roi": {
      "times": 1.1488140184616404,
      "currency": "usd",
      "percentage": 114.88140184616404
    },
    "last_updated": "2022-12-05T00:15:12.837Z",
    "sparkline_in_7d": {
      "price": [
        1.002580444846633,
        0.9636865510445581,
        0.9571402603421232,
        0.966305145277727,
        0.9717572118471133,
        0.9677452724592893,
        0.9713632984000008,
        0.9764651543458911,
        0.9797902751233772,
        0.9758395325814716,
        0.9678655682828546,
        0.9698178670215292,
        0.9711573983518186,
        0.9716703678869307,
        0.980258151890088,
        0.9698129186288853,
        0.9882309643397643,
        0.9775464255247432,
        0.9769158284477638,
        0.977516269887328,
        0.9792698429187471,
        0.9792904030617637,
        0.9803378249038335,
        0.9811186778240384,
        0.9773714265391236,
        0.9808443331315182,
        0.9864027652076405,
        0.9826675040375458,
        0.9900624856249808,
        0.992285714880898,
        0.9903304339300266,
        0.9921097906967081,
        0.9954394802831497,
        0.9909297138569106,
        0.9903365088764332,
        0.9912626803936858,
        0.989225814824345,
        0.985002663725637,
        0.9862432089829486,
        0.9853403807039423,
        0.9849593227060431,
        0.9809026694496805,
        0.9829074689744803,
        0.9833670164918714,
        0.9850027318933774,
        0.9842548451489975,
        0.9830728006474756,
        0.979209782612368,
        1.0029898581478993,
        1.0060881305879892,
        1.009921145314063,
        1.0079737635161528,
        1.0105024074719204,
        1.0113457138410178,
        1.0090076738048552,
        1.0097621098243874,
        1.0077307752577356,
        1.004828173316589,
        1.0036616929684927,
        1.0096765050104095,
        1.0131452058253443,
        1.0121497303078881,
        1.0129839541326717,
        1.0145529586718725,
        1.0084220815952878,
        0.996281404581462,
        1.007876569768212,
        1.0165673439052525,
        1.0193136688442535,
        1.0216686736802436,
        1.0322540872906911,
        1.0267469909773606,
        1.026158206028512,
        1.0149404968016191,
        1.0173947512894252,
        1.0185956364792668,
        1.017175301053697,
        1.0175469540865634,
        1.0182486213004858,
        1.0171480559520352,
        1.015095603584002,
        1.022847638831565,
        1.0152900856178022,
        1.0136156898771544,
        1.0153769354247308,
        1.0122446792779711,
        1.019402278989269,
        1.0135719722090633,
        1.0076167595731926,
        1.0141953786736733,
        1.005224574433063,
        1.009511195706837,
        1.0059471561438638,
        1.0060596125280472,
        1.0031125316605647,
        1.007605885685089,
        1.0117037622503833,
        1.0017051508098487,
        1.0052129842280524,
        1.0047554070063696,
        1.0072105168580598,
        1.006599613472731,
        1.0155298539767312,
        1.0151288017347968,
        1.0193596910444385,
        1.0268124320140977,
        1.0304458316501208,
        1.0374439118410137,
        1.0389420517914134,
        1.031209667732226,
        1.0388693810983163,
        1.0378041340545534,
        1.0345182258820198,
        1.0322654543955636,
        1.0286557057849453,
        1.0298903439305722,
        1.0327055370537574,
        1.0330766145049761,
        1.0338515352030533,
        1.036128324902705,
        1.030752334210267,
        1.031658114178142,
        1.031865437278413,
        1.0289926497968387,
        1.0277658144215438,
        1.0264521632263781,
        1.0191584394220863,
        1.0181890363259711,
        1.0104501006934001,
        1.020856563426828,
        1.0217220688572826,
        1.020572823515432,
        1.0224659983815725,
        1.0208204713011328,
        1.0204445469334036,
        1.020321239462615,
        1.0195543591611844,
        1.0189915189216237,
        1.0184169890530583,
        1.0167109293119285,
        1.011702273877671,
        1.0121145420676771,
        1.001342390564249,
        1.0019076931789668,
        1.0047325557072273,
        1.0052699502318676,
        1.011448907220539,
        1.00781601378635,
        1.0063197150402863,
        1.0115994082437725,
        1.010118352276789,
        1.0097296681614476,
        1.0081618949959816,
        1.0062742604110346,
        1.0053882102559712,
        0.9958056269714046,
        1.0027228250444573,
        0.9981025455869856,
        1.0030341458943497,
        1.0033620026047079,
        1.0066926582375832,
        1.008999305694796,
        1.0052869567632106,
        1.011903877411607,
        1.0117787395245916,
        1.0121031391296889,
        1.0083477741857372
      ]
    },
    "price_change_percentage_1h_in_currency": 0.13587822443866582,
    "price_change_percentage_24h_in_currency": 0.9803122857629432,
    "price_change_percentage_7d_in_currency": 2.0059579091220985
  }
]
      )

// Unused!
const [buy, setBuy]= useState( ['cryptoblades','burger-swap','jasmycoin','gods-unchained','tezos','eos','derace','aptos','bitcoin-cash','victoria-vr','sylo','maps','pallapay','genopets','jupiter','temco']) 
// Unused!
const [updateArr, setUpdateArr] = useState([])

const approvedCurrencies = [
{id:'USD'},
{id:'USD'},
{id:'JPY'},
  ];

const updateCurrenccy = useEffect(()=>{
const fixCurrency = (currency)=>{
setCurrency(currency)
}},[currency])


 return(
  <>
  <Head>
  <title>Coin Market Stats</title>
  <meta name="Coin Market Stats" content="Real time crpto stats  for free" />
  <link rel="icon" href="/favicon.PNG" />
  </Head>
      
  {<Header />}

  <main >

  <div className={styles.cmv_top}></div>
  <div className={styles.cmvBody}>
  <HeaderActivities currencySymbol={currencySymbol} setCurrencySymbol={setCurrencySymbol} />
  
  <SearchCrypto activeCoins={activeCoins} buy={buy} setBuy={setBuy} setActiveCoins={setActiveCoins} currency={currency} quickData={quickData} setQuickData={setQuickData} setCoinArr={setCoinArr} setRunOrStop={setRunOrStop} searchGems={searchGems} setSearchGems={setSearchGems} priceAlertzPing={priceAlertzPing} setPriceAlertzPing={setPriceAlertzPing} openPriceALertsModal={openPriceALertsModal} setOpenPriceALertsModal={setOpenPriceALertsModal} />
 
  <Currencies currency={currency} setCurrency={setCurrency} currencyPlural={currencyPlural} setCurrencyPlural={setCurrencyPlural} 
  currencySingular={currencySingular} setCurrencySingular={setCurrencySingular} currencySymbol ={currencySymbol} setCurrencySymbol={setCurrencySymbol} />
 
 <DisplayCoin activeCoins={activeCoins} buy={buy} setBuy={setBuy} setActiveCoins={setActiveCoins} setQuickData={setQuickData} setCoinArr={setCoinArr} currency={currency} searchGems={searchGems} openModal={openModal} setOpenModal={setOpenModal} modalSearch={modalSearch} setModalSearch={setModalSearch} startModal={startModal} setStartModal={setStartModal} index={index} setIndex={setIndex} priceAlertzPing ={priceAlertzPing} setPriceAlertzPing={setPriceAlertzPing} currencySymbol={currencySymbol} setCurrencySymbol={setCurrencySymbol} />
 
 <Tools currency={currency} setCurrency={setCurrency} currencyPlural={currencyPlural} setCurrencyPlural={setCurrencyPlural} 
  currencySingular={currencySingular} setCurrencySingular={setCurrencySingular} currencySymbol ={currencySymbol} setCurrencySymbol={setCurrencySymbol} />
 </div>
 </main>

  <Footer />
  

  </>
 )
  
  
}


